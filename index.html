<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="None">
    
    
    <link rel="shortcut icon" href="./img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>DKAN Tools Documentation</title>
    <link href="./css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="./css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="./css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/highlight.css">
    <link href="css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/bootstrap-3.3.7.min.js"></script>
    <script src="./js/highlight.pack.js"></script>
    
      <script src="./js/elasticlunr.min.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '.';
      var is_top_frame = (window === window.parent);
        
        var pageToc = [
          {title: "DKAN Tools", url: "#_top", children: [
              {title: "Requirements", url: "#requirements" },
              {title: "Basic usage", url: "#basic-usage" },
              {title: "Automated Proxy:", url: "#automated-proxy" },
          ]},
        ];

    </script>
    <script src="./js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>

<nav class="navbar wm-page-top-frame">
  <div class="container-fluid wm-top-container">
    
    <div class="wm-top-tool pull-right wm-vcenter">
      <form class="dropdown wm-vcentered" id="wm-search-form" action="./search.html">
        
        <button id="wm-search-show" class="btn btn-sm btn-default" type="submit"
          ><i class="fa fa-search" aria-hidden="true"></i></button>

        <div class="input-group input-group-sm wm-top-search">
          <input type="text" name="q" class="form-control" id="mkdocs-search-query" placeholder="Search" autocomplete="off">
          <span class="input-group-btn" role="search">
            
            <button class="btn btn-default dropdown-toggle collapse" data-toggle="dropdown" type="button"><span class="caret"></span></button>
            <ul id="mkdocs-search-results" class="dropdown-menu dropdown-menu-right"></ul>
            <button id="wm-search-go" class="btn btn-default" type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
          </span>
        </div>
      </form>
    </div>

    
    <div class="wm-top-tool wm-vcenter pull-right wm-small-left">
      <button id="wm-toc-button" type="button" class="btn btn-sm btn-default wm-vcentered"><i class="fa fa-th-list" aria-hidden="true"></i></button>
    </div>

    
    

    
    <a href="" class="wm-top-brand wm-top-link wm-vcenter">
      
      <div class="wm-top-title">
        DKAN Tools Documentation<br>
        
          <span class="wm-top-version">2.4.x</span>
        
      </div>
    </a>
  </div>
</nav>

  <div id="main-content" class="wm-page-top-frame">
    
<nav class="wm-toc-pane">
  
    <ul class="wm-toctree wm-toc-repo">
      <li class="wm-toc-li wm-toc-lev1">
      <a class="wm-article-link wm-toc-text" href="https://github.com/GetDKAN/dkan-tools/">
        <i class="fa fa-github"></i>

        GitHub
      </a>
      </li>
    </ul>
  <ul class="wm-toctree">
        <li class="wm-toc-li wm-toc-lev1 "><a href="" class="wm-article-link wm-toc-text">DKAN Tools</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="installation/" class="wm-article-link wm-toc-text">Installation</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="newproject/" class="wm-article-link wm-toc-text">Starting a new project</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="add_dkan/" class="wm-article-link wm-toc-text">Add DKAN to an existing site</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="structure/" class="wm-article-link wm-toc-text">File structure of a DKAN-Tools-based project</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="frontend/" class="wm-article-link wm-toc-text">Decoupled frontend</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="backups/" class="wm-article-link wm-toc-text">Database and file backups</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="maintenance/" class="wm-article-link wm-toc-text">Site Maintenance</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="patching/" class="wm-article-link wm-toc-text">Patching</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="extend/" class="wm-article-link wm-toc-text">Custom commands</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="troubleshooting/" class="wm-article-link wm-toc-text">Troubleshooting</a>
</li>
  </ul>
</nav>

    <div class="wm-content-pane">
      <iframe class="wm-article" name="article"></iframe>
    </div>
  </div>

<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="installation/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="installation/" class="btn btn-xs btn-link">
        Installation
      </a>
    </div>
    
  </div>

    

    <h1 id="dkan-tools">DKAN Tools</h1>
<p>This CLI application provides tools for implementing, developing, and maintaining <a href="https://github.com/GetDKAN/dkan">DKAN</a>, the Drupal-based open data catalog. For Drupal 7.x projects use the 1.x branch.</p>
<h2 id="requirements">Requirements</h2>
<p>DKAN Tools was designed with a <a href="https://www.docker.com/">Docker</a>-based local development environment in mind. Current requirements are simply:</p>
<ul>
<li>Bash-like shell that can execute .sh files (Linux or OS X terminals should all work)</li>
<li><a href="https://www.docker.com/get-docker">Docker</a></li>
<li><a href="https://docs.docker.com/compose/">Docker Compose</a></li>
</ul>
<p>That's it! All other dependencies are included in the Docker containers that dkan-tools will create.</p>
<h2 id="basic-usage">Basic usage</h2>
<p>Once you are working in an initialized project folder, you can type <code>dktl</code> at any time to see a list of all available commands.</p>
<pre><code>Available commands:
deploy                      Performs common tasks when switching databases or code bases.
help                        Displays help for a command
init                        Initialize DKAN project directory.
install                     Perform Drupal/DKAN database installation
list                        Lists commands
make                        Get all necessary dependencies and "make" a working codebase.
restore                     Restore files and database.
dkan
dkan:demo                   [demo] Create a new demo project.
dkan:docs                   Build DKAN docs with doxygen.
dkan:test-cypress           Run DKAN Cypress Tests.
dkan:test-dredd             Run DKAN Dredd Tests.
dkan:test-phpunit           Run DKAN PhpUnit Tests. Additional phpunit CLI options can be passed.
dkan:test-phpunit-coverage  Run DKAN PhpUnit Tests and send a coverage report to CodeClimate.
docker
docker:compose              [dc] Run a docker-compose command. E.g. "dktl docker:compose ps".
docker:proxy-connect        [proxy:connect] Connect the web container to the proxy.
docker:proxy-kill           [proxy:kill] Kill the dktl proxy service.
docker:url                  [url] Display the http web URL for the current project.
exec
exec:composer               [composer] Proxy to composer.
exec:drush                  [drush] Run drush command on current site.
frontend
frontend:build              Build frontend app.
frontend:get                Download the DKAN frontend app to src/frontend.
frontend:install            Download frontend app if not present, and run npm install.
frontend:test               Run cypress tests on the frontend app.
git
git:config                  Configure git in current environment with user name and email.
git:deploy                  Deploy code including gitignored files to branch of same name on Acquia.
git:remove-submodules       Recurse through docroot and vendor and delete all .git dirs.
init
init:dkan                   Add DKAN as a dependency to the project composer.json.
init:drupal                 Create a new Drupal project in the current directory.
install
install:sample              Install DKAN sample content.
make
make:symlinks               Create symlinks from docroot to folders in src.
restore
restore:db                  Restore the database from a backup.
restore:files               Restore a files archive to appropriate site directories.
restore:grab-database       Create a database dump excluding devel and datastore tables.
xdebug
xdebug:start                Start xdebug on CLI and web containers.
xdebug:stop                 Stop xdebug on CLI and web containers.
</code></pre>
<div class="admonition note">
<p class="admonition-title">Running without Docker</p>
<p>If for some reason you would like to use some of DKTL without docker, there is a mechanism to accomplish this.</p>
<p>First of all, make sure that you have all of the software DKTL needs:</p>
<ol>
<li>PHP</li>
<li>Composer</li>
<li>Drush</li>
</ol>
<p>The mode in which DKTL runs is controlled by an environment variable: <code>DKTL_MODE</code>. To run DKLT without docker set the environment variable to <code>HOST</code>:</p>
<p><code>export DKTL_MODE="HOST"</code></p>
<p>To go back to running in docker mode, set the variable to <code>DOCKER</code> (or just delete it).</p>
</div>
<h2 id="automated-proxy">Automated Proxy:</h2>
<p>DKAN-tools leverages <a href="https://docs.traefik.io/">traefik</a> to route traffic based on a per-environment domain name. Traefik is run as a singleton service named <code>dktl-proxy</code>.</p>
<p>dktl-proxy will serve your website from a constructed domain in the form of "{{dktl-slug}}.localtest.me", where dktl-slug is the per project string identifying the current environment. If your project directory is dkan, the project will be served at <code>//dkan.localtest.me</code></p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="installation/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="installation/" class="btn btn-xs btn-link">
        Installation
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
      <p>
        <a href="https://github.com/GetDKAN/dkan-tools/edit/master/docs/index.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>
<!--
MkDocs version : 1.1.2
Build Date UTC : 2020-10-14 15:36:41.428939+00:00
-->